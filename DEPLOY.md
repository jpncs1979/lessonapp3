# レッスンスケジューラー 公開手順（初心者向け）

このアプリをインターネットで誰でもアクセスできるようにする手順です。**Vercel（ヴァーセル）** という無料のサービスを使います。

---

## 変更点をアップロードするには（すでに GitHub と Vercel を設定済みの人向け）

コードを直したあと、「その変更を GitHub に送って、本番のサイトに反映させる」手順です。

### やること（2ステップ）

1. **変更を「コミット」する**（いまの状態をひとまとめで保存する）
2. **GitHub に「プッシュ」する**（その保存をインターネット上に送る）

Vercel で GitHub と連携していれば、**プッシュすると自動で本番サイトが更新**されます。別の作業は不要です。

---

### 方法A：自分でターミナルでやる

1. **Cursor や VS Code で**、このプロジェクトのフォルダを開いた状態にする
2. メニューから **ターミナル** → **新しいターミナル** を開く
3. 次の3行を、**1行ずつ**実行する（コピー＆ペーストでOK）

```bash
git add .
git commit -m "〇〇の変更"
git push
```

- **1行目** `git add .` … 変更したファイルを「次の保存に含める」とマークする
- **2行目** `git commit -m "〇〇の変更"` … その内容をひとつの「保存ポイント」として記録する。`〇〇の変更` の部分は、**何を直したか**が分かるように自由に書く（例：`名前選択を最初の画面に`）
- **3行目** `git push` … その保存を GitHub に送る。送ったあと、Vercel が自動でサイトを更新する

**注意**  
- 初めてこのプロジェクトを GitHub に送る場合は、`git push` ではなく、DEPLOY.md の「ステップ1」の `git remote add origin ...` と `git push -u origin master` を先に実行する必要があります。
- ブランチ名が `main` の場合は、`git push` で届かないときだけ `git push -u origin main` を試してください。

---

### 方法B：AI（Cursor）に任せる

Cursor のチャットで、次のように頼みます。

- **例1**  
  「今の変更を GitHub にアップロードして。`git add .` と `git commit` と `git push` を実行して。」
- **例2**  
  「〇〇を直したので、その変更をコミットして push して。」（〇〇に内容を入れる）

AI がターミナルでコマンドを実行してくれます。完了したら、Vercel のサイトが数十秒〜1分以内に自動で更新されます。

---

### うまくいかないとき

| 症状 | 対処 |
|------|------|
| `git push` で「リモートがありません」と出る | まだ GitHub にリポジトリを登録していません。このファイルの **ステップ1** を最初からやってください。 |
| `git push` で「Permission denied」など認証エラー | GitHub にログインし直す必要があります。ブラウザで [github.com](https://github.com) にログインした状態で、もう一度 `git push` を試すか、GitHub の「SSH キー」や「Personal Access Token」の設定をします。 |
| プッシュしたのにサイトが更新されない | Vercel のダッシュボード（[vercel.com](https://vercel.com)）で、対象プロジェクトを開き、**Deployments** に新しいデプロイが並んでいるか確認してください。エラーになっている場合は、そのログを開いて内容を確認するか、Cursor に貼って「このエラーの原因を教えて」と聞いてください。 |

---

## 全体の流れ（初めて公開する場合・3ステップ）

1. **GitHub にコードを上げる**（AI に任せられる）
2. **Vercel で「この GitHub のアプリを公開する」と設定する**（画面の指示に従うだけ）
3. **発行された URL でアクセスする**

---

## ステップ0：事前に用意するもの

- **パソコン**（Windows / Mac どちらでも可）
- **インターネット**
- **GitHub のアカウント**（まだなら [github.com](https://github.com) で「Sign up」から無料作成）
- **Vercel のアカウント**（後で GitHub でログインするので、先に GitHub があればOK）

---

## ステップ1：GitHub にコードを上げる

### 1-1. フォルダを Git の管理下にする（すでにしてある場合は飛ばしてOK）

プロジェクトのフォルダ（例: `lessonapp3`）を開いた状態で、次のどちらかを行います。

**方法A：Cursor / VS Code のターミナルでやる**

1. メニューから **ターミナル** → **新しいターミナル** を開く
2. 次のコマンドを1行ずつ実行する（`#` 以降は説明なので入力しなくてOK）

```bash
git init
git add .
git commit -m "初回：レッスンスケジューラー"
```

**各コマンドの意味**

| コマンド | 説明 |
|----------|------|
| `git init` | 今いるフォルダを「Git で管理する」と宣言します。中に `.git` という隠しフォルダができ、ここから変更履歴を記録します。 |
| `git add .` | カレントフォルダ（`.`）の中の**変更されたファイルをすべて**「次の保存対象に入れる」という意味です。新規・変更・削除したファイルがまとめてステージされます。 |
| `git commit -m "初回：レッスンスケジューラー"` | いま `git add` した内容を、ひとつの「保存ポイント」として記録します。`-m "..."` はその保存に付けるメッセージ（コミットメッセージ）で、あとから「何をしたか」が分かるように書きます。 |

**方法B：AI に任せる**

Cursor のチャットで次のように頼みます。

「このプロジェクトを Git で管理して、最初のコミットまでやってください。`git init` と `git add .` と `git commit` まで。」

### 1-2. GitHub にリポジトリを作る

1. ブラウザで [github.com](https://github.com) にログインする
2. 右上の **＋** をクリック → **New repository** を選ぶ
3. **Repository name** に `lessonapp3` など好きな名前を入れる
4. **Public** を選ぶ
5. **Create repository** をクリックする
6. 次の画面に「…or push an existing repository from the command line」と出るので、そこに書いてある **2行のコマンド** をコピーする（例）

```bash
git remote add origin https://github.com/あなたのユーザー名/lessonapp3.git
git push -u origin master
```

**各コマンドの意味**

| コマンド | 説明 |
|----------|------|
| `git remote add origin https://github.com/...` | 「このプロジェクトの、インターネット上の置き場（リモート）の名前を `origin` にして、URL はこの GitHub のリポジトリ」と登録します。`origin` は慣例で「本番のリポジトリ」によく使う名前です。 |
| `git push -u origin master` | いままで `commit` した内容を、`origin` というリモートの `master` ブランチに**送り上げる**コマンドです。`-u` は「次からは `git push` だけでもこのブランチに送る」と覚えさせるオプションです。 |

### 1-3. ローカルのコードを GitHub に送る

**方法A：自分でやる**

1. プロジェクトフォルダでターミナルを開く
2. 上でコピーした2行を、1行ずつ実行する（`あなたのユーザー名` の部分は GitHub の画面に表示されている通りに）

**方法B：AI に任せる**

Cursor のチャットで次のように頼みます。

「今のプロジェクトを GitHub に push したい。リポジトリの URL は `https://github.com/○○/lessonapp3.git` です。`git remote add origin` と `git push -u origin master` を実行してください。」

（○○の部分は自分の GitHub のユーザー名に置き換えてください）

ここまでで、GitHub のページを開くと、プロジェクトのファイル一覧が表示されていればOKです。

---

## ステップ2：Vercel で公開する

### 2-1. Vercel にログイン

1. ブラウザで [vercel.com](https://vercel.com) を開く
2. **Sign Up** または **Log In** をクリック
3. **Continue with GitHub** を選び、GitHub の認証を行う（初回だけ）

### 2-2. 「新しいプロジェクト」として GitHub のアプリを読み込む

1. ログイン後の画面で **Add New…** をクリック
2. **Project** をクリック
3. **Import Git Repository** の一覧に、GitHub のアカウントやリポジトリ名が出ます
4. **lessonapp3**（または付けた名前）の右側の **Import** をクリック

### 2-3. 設定画面（ほとんどそのままでOK）

次の画面では、次のようにします。

- **Project Name**  
  - そのままでOK（変えてもよい）
- **Framework Preset**  
  - **Next.js** と表示されていればそのままでOK
- **Root Directory**  
  - **Leave empty** のまま（変更しない）
- **Build and Output Settings**  
  - 何も変えなくてOK（Build Command は `next build` のまま）

**Environment Variables（環境変数）**

- このアプリは **いまのところ環境変数を設定しなくても動きます**（ログイン・データはブラウザの localStorage を使用）
- 何も追加せず、そのまま **Deploy** で進めて大丈夫です

### 2-4. デプロイ開始

1. 画面下の **Deploy** ボタンをクリック
2. 数十秒〜1分ほど待つと「Building…」が終わり、**Congratulations** のような画面になる
3. **Visit** というボタン、または表示されている **URL**（例: `https://lessonapp3-xxxx.vercel.app`）をクリックする

これで **インターネット上に公開された状態** です。この URL を他の人に教えれば、同じアプリにアクセスできます。

---

## ステップ3：公開後の確認

1. 発行された URL を開く
2. **名前を選択して入る** の画面（名前選択）が出る
3. 名前を選んで、未登録ならメール・パスワードで登録、登録済みなら「ログイン」で入る
4. ログイン後、カレンダーなどが使えればOK

---

## AI でやってもらえること（まとめ）

次のような依頼を Cursor などにすると、手順の多くを任せられます。

- 「このフォルダで `git init` と `git add .` と `git commit` を実行して」
- 「リポジトリ URL を `https://github.com/○○/lessonapp3.git` にして、`git remote add origin` と `git push -u origin master` を実行して」
- 「`npm run build` が通るか確認して。エラーが出たら直して」

Vercel の「Import → Deploy」のクリック操作は、ブラウザで自分で行う必要がありますが、**コードの準備や Git の操作は AI に任せて問題ありません**。

---

## よくある質問

**Q. 無料で使える？**  
A. Vercel の無料プランで、個人利用程度なら十分使えます。利用制限は [Vercel の料金ページ](https://vercel.com/pricing) で確認できます。

**Q. データはどこに保存される？**  
A. 今の仕様では、**各利用者のブラウザ（localStorage）** に保存されます。別のパソコンや別のブラウザではデータは共有されません。本番で「複数人で同じデータを共有したい」場合は、Supabase などのデータベースを後から組み込む必要があります。

**Q. URL を変えたい・自分用のドメインにしたい**  
A. Vercel のプロジェクト画面で **Settings** → **Domains** から、自分で取得したドメインを追加できます。説明は [Vercel のドメイン設定](https://vercel.com/docs/concepts/projects/domains) を参照してください。

**Q. ビルドでエラーが出る**  
A. まずローカルで次を実行して確認します。

```bash
npm run build
```

- **`npm run build`** … 本番用にアプリをまとめてビルドするコマンドです。成功すると `next build` が完了し、エラーがあればターミナルに表示されます。

エラーメッセージをそのまま Cursor のチャットに貼り、「このエラーを解消して」と頼むと、修正案を出してもらえます。

---

## 付録：Git コマンド一覧と説明

この手順で使う Git のコマンドをまとめました。意味が気になったときに見返してください。

| コマンド | 何をするか |
|----------|------------|
| `git init` | 現在のフォルダを Git の管理下に置く。最初に1回だけ実行する。 |
| `git add .` | 変更したファイルを「次のコミットに含める」とマークする。`.` は「このフォルダ以下すべて」の意味。 |
| `git commit -m "メッセージ"` | いま `add` した内容を、1つの履歴として保存する。`-m` の後の文字列がその履歴の説明になる。 |
| `git remote add origin URL` | リモート（GitHub 上のリポジトリ）に名前 `origin` を付けて登録する。URL は GitHub のリポジトリページに表示されているものをそのまま使う。 |
| `git push -u origin master` | ローカルの `master` ブランチの内容を、リモートの `origin` の `master` に送る。`-u` で「今後このブランチは origin の master と対応」と覚えさせる。 |

**用語の補足**

- **リポジトリ** … プロジェクトのファイルとその履歴をまとめたもの。GitHub 上にあるのが「リモートリポジトリ」、自分のパソコンにあるのが「ローカルリポジトリ」。
- **ブランチ** … 履歴の流れの枝。この手順では `master` だけを使うので、「今のメインの履歴」と思っておけば十分です。
- **push（プッシュ）** … ローカルのコミットをリモート（GitHub）に送り上げること。

---

## まとめ

1. **GitHub** にコードを push する（ターミナルか AI で）
2. **Vercel** にログイン → **Add New** → **Project** → 対象リポジトリの **Import** → **Deploy**
3. 表示された **URL** でアプリにアクセス

環境変数は今は不要です。この3ステップで、先生が登録した生徒・伴奏者だけがログインできる状態のアプリを公開できます。
